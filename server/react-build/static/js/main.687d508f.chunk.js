(this["webpackJsonprealtime-multi-player"]=this["webpackJsonprealtime-multi-player"]||[]).push([[0],{146:function(t,e,n){},147:function(t,e,n){},264:function(t,e,n){"use strict";n.r(e);var o,a=n(0),c=n.n(a),i=n(10),r=n.n(i),s=(n(146),n(147),n(12)),l=n(16),u=n(19),d=n(122),h=n(23),j=n.n(h),p=n(45),f=n(267),b=n(123),O=n(129),m=n(303),v=n(310),x=n(309),g=n(313),w=n(7),S=Object(f.a)({root:{display:"flex",justifyContent:"space-between"},paintBar:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"10px"},cursorSize:{width:"60px"}}),C=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SERVER_ADDR||"drawing.richwhite.net",y=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).WEBSOCKET_ENDPOINT||"websockettest",E="",T=JSON.stringify({action:"CLEAR",topic:E}),k=window.innerWidth-15,R=window.innerHeight-200,N="black",_=0,I=!1,W=null,M=(new Set,new Set),A=new Set,D=!1,L=0,B=0,F=function(){z();var t="wss://".concat(C,"/").concat(y);console.log("Attempting to connect to websocket on: ".concat(t)),(W=new WebSocket(t)).onopen=function(){console.log("WebSocket Client Connected")},W.onmessage=function(t){var e=JSON.parse(t.data);e.topic===E&&(void 0!==(null===e||void 0===e?void 0:e.type)?A.add(e):"CLEAR"===(null===e||void 0===e?void 0:e.action)&&(M.clear(),D=!0,console.log("Clear called")))}},H=function(){var t=Object(p.a)(j.a.mark((function t(e,n){var o,a,c,i,r,s,l,u,d,h,p,f=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=f.length>2&&void 0!==f[2]?f[2]:2,a=f.length>3&&void 0!==f[3]&&f[3],c=e.getBoundingClientRect(),i=Math.floor(n.clientX-c.left),r=Math.floor(n.clientY-c.top),"touchmove"===n.type&&(i=n.touches[0].screenX,r=n.touches[0].screenY),N=a?U():N,s={topic:E,type:"CIRCLE",color:N,radius:o,posX:i,posY:r},W.send(JSON.stringify(s)),I&&L>0&&B>0&&(l=Math.sqrt(Math.pow(i-L,2)+Math.pow(r-B,2)))>4)for((r-B)/(i-L),u=(i-L)/l,d=(r-B)/l,h=1;h<=l/2;h++)p={topic:E,type:"CIRCLE",color:N,radius:o,posX:L+2*h*u,posY:B+2*h*d},W.send(JSON.stringify(p));L=i,B=r;case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),P=function(t){D&&(console.log("Clear Canvas"),J(t),D=!1),Array.from(A).map((function(e){!function(t){var e=t.ctx,n=t.posX,o=t.posY,a=t.radius,c=t.color;e.beginPath(),e.arc(n,o,a,0,2*Math.PI),e.fillStyle=c,e.fill(),e.strokeStyle=c,e.stroke()}(Object(d.a)({ctx:t},e))})),M=new Set([].concat(Object(u.a)(M),Object(u.a)(A))),A=new Set},J=function(t){console.log("Clear Canvas called"),t.fillStyle="white",t.fillRect(0,0,o.width,o.height)},K=function(){W.send(T)},z=function(){var t="https://letsdrawtogether.net/api/canvasState?roomId=".concat(E);fetch(t,{method:"GET"}).then((function(t){return t.json()})).then((function(t){t.map((function(t){return A.add(t)}))}))},U=function(){return(_+=1)>360&&(_-=360),"hsl(".concat(_,", 100%, 50%)")},X=function(t,e){I=!1,L=0,B=0},Y=function(t,e,n){t.width=e,t.height=n,k=e,R=n},q=function(t){var e,n=t.match,c=(t.location,S()),i=Object(a.useRef)(),r=Object(a.useState)(2),s=Object(l.a)(r,2),u=s[0],d=s[1],h=Object(a.useState)(!1),f=Object(l.a)(h,2),C=f[0],y=f[1];void 0!==(null===n||void 0===n||null===(e=n.params)||void 0===e?void 0:e.roomId)&&(E=n.params.roomId),T=JSON.stringify({action:"CLEAR",topic:E}),Object(b.a)(i),window.addEventListener("resize",Y,!1);var _=function(){var t=Object(p.a)(j.a.mark((function t(e,n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:H(e,n,u,C),I=!0;case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),W=function(){var t=Object(p.a)(j.a.mark((function t(e,n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I&&H(e,n,u,C);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.useEffect)(Object(p.a)(j.a.mark((function t(){var e,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F(),o=i.current,n=function(){var t=Object(p.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.innerWidth-15,window.innerHeight-160,a=o.getContext("2d"),P(a),e=requestAnimationFrame(n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=5,n();case 5:return t.abrupt("return",(function(){cancelAnimationFrame(e)}));case 6:case"end":return t.stop()}}),t)})))),Object(w.jsxs)("div",{children:[Object(w.jsx)(m.a,{onClick:K,children:"Clear Canvas"}),Object(w.jsx)("canvas",{ref:i,width:k,height:R,onMouseDown:function(t){return _(o,t)},onMouseMove:function(t){return W(o,t)},onMouseUp:function(t){return X()},onMouseLeave:function(t){return X()},onTouchStart:function(t){return _(o,t)},onTouchMove:function(t){return W(o,t)},onTouchEnd:function(t){return X()}}),Object(w.jsxs)("div",{className:c.paintBar,children:[Object(w.jsx)(O.a,{onChange:function(t,e){N=t.hex}}),Object(w.jsx)("div",{}),Object(w.jsxs)(v.a,{children:[Object(w.jsx)(x.a,{className:c.cursorSize,value:u,label:"cursor size",variant:"outlined",onChange:function(t){var e=t.target.value;try{d(parseInt(e))}catch(n){}}}),Object(w.jsx)(g.a,{value:C,label:"Rainbow Mode",onChange:function(){y(!C)}})]})]})]})},V=n(306),G=n(307),Q=n(308),Z=n(312),$=n(305),tt=Object($.a)({toolBar:{display:"flex",justifyContent:"space-between"},selectedItem:{color:"blue",backgroundColor:"gray"},modal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4}}),et=function(t){var e=tt(),n=Object(s.e)(),o=function(t){return n.push(t)},c=Object(a.useState)(null),i=Object(l.a)(c,2),r=(i[0],i[1]),u=Object(a.useState)(null),d=Object(l.a)(u,2),h=(d[0],d[1]),j=Object(a.useState)(!1),p=Object(l.a)(j,2),f=p[0],b=p[1],O=Object(a.useState)(""),g=Object(l.a)(O,2),S=g[0],C=g[1];return Object(w.jsx)("div",{children:Object(w.jsx)(V.a,{position:"static",color:"inherit",children:Object(w.jsxs)(G.a,{className:e.toolBar,children:[Object(w.jsx)(Q.a,{children:Object(w.jsx)(v.a,{fontWeight:"600",fontSize:24,children:"letsdrawtogether.net"})}),Object(w.jsx)(m.a,{color:"inherit",onClick:function(){return o("")},children:"Home"}),Object(w.jsx)(m.a,{color:"inherit",onClick:function(){return b(!0)},children:"Change Room/Topic"}),Object(w.jsx)(Z.a,{open:f,onClose:function(t){t instanceof Function&&t(),r(null),h(null)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(w.jsxs)(v.a,{className:e.modal,children:[Object(w.jsx)(Q.a,{id:"modal-modal-description",sx:{mt:2},children:"Type a topic to navigate to a new Room/white Board"}),Object(w.jsx)(x.a,{onChange:function(t){return C(t.target.value)}}),Object(w.jsx)(m.a,{color:"inherit",onClick:function(){o("/room/".concat(S)),b(!1)},children:"Ok"})]})}),Object(w.jsx)(m.a,{color:"inherit",onClick:function(t){return h(t.currentTarget)},children:"Save Image"}),Object(w.jsx)(m.a,{color:"inherit",onClick:function(){return o("/about")},children:"About"}),Object(w.jsx)(m.a,{color:"inherit",onClick:function(){return o("/login")},children:"Login"})]})})})},nt=n(314),ot=Object(f.a)({root:{display:"flex",justifyContent:"space-between"},avatar:{width:"20vw",height:"20vw",maxWidth:"200px",maxHeight:"200px"},typography:{width:"70vw"},gap:{width:"5vw"},static_gaps:{width:"50px"}}),at=function(){var t=ot();return Object(w.jsxs)("div",{className:t.root,children:[Object(w.jsx)("div",{className:t.gap}),Object(w.jsx)(nt.a,{className:t.avatar,alt:"RW",src:"aboutme.png"}),Object(w.jsx)("div",{className:t.gap}),Object(w.jsxs)(Q.a,{className:t.typography,align:"justify",children:["Hello! My name is Richard White. I am a software and data engineer based out of NJ. Computer science, education, and art are a few of my passions I wanted to to bring together in this fun project. While this site is still in very early development, I plan to incorporate more interaction, support and new features/variants. If you have any questions or comments you can reach me at: ",Object(w.jsx)("br",{}),Object(w.jsx)("a",{href:"mailto:therichphysicist@gmail.com",children:"therichphysicist@gmail.com"}),Object(w.jsx)("br",{}),"Thanks and enjoy!"]}),Object(w.jsx)("div",{className:t.gap})]})},ct=function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(et,{}),Object(w.jsx)(s.a,{path:"/about",component:at}),Object(w.jsx)(s.a,{exact:!0,path:"/",component:q}),Object(w.jsx)(s.a,{path:"/room/:roomId",component:q})]})},it=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,317)).then((function(e){var n=e.getCLS,o=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),o(t),a(t),c(t),i(t)}))},rt=n(61),st=n(311);r.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(rt.a,{children:Object(w.jsx)(st.a,{children:Object(w.jsx)(ct,{})})})}),document.getElementById("root")),it()}},[[264,1,2]]]);
//# sourceMappingURL=main.687d508f.chunk.js.map