(this["webpackJsonprealtime-multi-player"]=this["webpackJsonprealtime-multi-player"]||[]).push([[0],{113:function(t,n,e){},114:function(t,n,e){},230:function(t,n,e){"use strict";e.r(n);var o,c=e(0),r=e.n(c),i=e(26),a=e.n(i),s=(e(113),e(114),e(5)),u=e(24),d=e.n(u),l=e(47),f=e(96),h=e(105),p=e(247),O=e(7),v=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SERVER_ADDR||"letsdrawtogether.net",j=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).WEBSOCKET_ENDPOINT||"websockettest",w=JSON.stringify({action:"CLEAR"}),S=window.innerWidth-15,b=window.innerHeight-160,g="black",m=!1,E=null,C=new Set,x=function(t){D(t),y(t);var n="wss://".concat(v,"/").concat(j,"/room/").concat(t);console.log("Attempting to connect to websocket on: ".concat(n)),(E=new WebSocket(n)).onopen=function(){console.log("WebSocket Client Connected")},E.onmessage=function(t){var n=JSON.parse(t.data);"CLEAR"===(null===n||void 0===n?void 0:n.action)&&C.clear(),void 0!==(null===n||void 0===n?void 0:n.type)&&C.add(n)}},T=function(t,n){var e=t.getBoundingClientRect(),o=n.clientX-e.left,c=n.clientY-e.top,r={type:"CIRCLE",color:g,radius:2,posX:o,posY:c};E.send(JSON.stringify(r))},R=function(t){t.fillStyle="white",t.fillRect(0,0,o.width,o.height),Array.from(C).map((function(n){!function(t){var n=t.ctx,e=t.posX,o=t.posY,c=t.radius,r=t.color;n.beginPath(),n.arc(e,o,c,0,2*Math.PI),n.fillStyle=r,n.fill(),n.strokeStyle=r,n.stroke()}(Object(f.a)({ctx:t},n))}))},_=function(){E.send(w)},y=function(t){var n="https://letsdrawtogether.net/api/canvasState?roomId=".concat(t);console.log(n),fetch(n,{method:"GET"}).then((function(t){return t.json()})).then((function(t){console.log(t),C=new Set(t),console.log(C)}))},D=function(){var t=Object(l.a)(d.a.mark((function t(n){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="https://letsdrawtogether.net/room/".concat(n),console.log("Connecting to Room..."),console.log(e),t.next=5,fetch(e,{method:"POST"});case 5:t.sent;case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),k=function(t,n){m=!1},L=function(t){var n=t.match,e=(t.location,n.params.roomId),r=Object(c.useRef)(),i=function(t,n,e){t.width=n,t.height=e,S=n,b=e};window.addEventListener("resize",i,!1);return Object(c.useEffect)(Object(l.a)(d.a.mark((function t(){var n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(e),(o=r.current).addEventListener("mousedown",(function(t){return T(o,t)})),c=function(){var t=Object(l.a)(d.a.mark((function t(){var e,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=window.innerWidth-15,r=window.innerHeight-160,i(o,e,r),a=o.getContext("2d"),R(a),n=requestAnimationFrame(c);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=6,c();case 6:return t.abrupt("return",(function(){cancelAnimationFrame(n)}));case 7:case"end":return t.stop()}}),t)})))),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:"created by Rich White"}),Object(O.jsx)(p.a,{onClick:_,children:"Clear Canvas"}),Object(O.jsx)("canvas",{ref:r,width:S,height:b,onMouseDown:function(t){return function(t,n){T(t,n),m=!0}(o,t)},onMouseMove:function(t){return function(t,n){m&&T(t,n)}(o,t)},onMouseUp:function(t){return k()},onMouseLeave:function(t){return k()}}),Object(O.jsx)(h.a,{onChange:function(t,n){g=t.hex}})]})},W=e(249),A=function(){return Object(O.jsx)(W.a,{children:"Lets Draw Together! - created by Rich White"})},P=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(s.a,{path:"/",component:A}),Object(O.jsx)(s.a,{exact:!0,path:"/room/:roomId",component:L})]})},F=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,250)).then((function(n){var e=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,i=n.getTTFB;e(t),o(t),c(t),r(t),i(t)}))},I=e(68),N=e(248);a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(I.a,{children:Object(O.jsx)(N.a,{children:Object(O.jsx)(P,{})})})}),document.getElementById("root")),F()}},[[230,1,2]]]);
//# sourceMappingURL=main.27109d5f.chunk.js.map