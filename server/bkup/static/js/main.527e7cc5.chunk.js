(this["webpackJsonprealtime-multi-player"]=this["webpackJsonprealtime-multi-player"]||[]).push([[0],{113:function(n,e,t){},114:function(n,e,t){},230:function(n,e,t){"use strict";t.r(e);var o,c=t(0),i=t.n(c),r=t(25),a=t.n(r),s=(t(113),t(114),t(34)),u=t.n(s),d=t(68),l=t(96),f=t(105),h=t(247),O=t(249),v=t(7),j=function(){return Object(v.jsx)(O.a,{children:"Lets Draw Together! - created by Rich White"})},p=t(5),b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SERVER_ADDR||"letsdrawtogether.net",S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).WEBSOCKET_ENDPOINT||"websockettest",w=JSON.stringify({action:"CLEAR"}),g=window.innerWidth-15,E=window.innerHeight-160,C="black",x=!1,T=null,_=new Set,m=function(){L();var n="wss://".concat(b,"/").concat(S);console.log("Attempting to connect to websocket on: ".concat(n)),(T=new WebSocket(n)).onopen=function(){console.log("WebSocket Client Connected")},T.onmessage=function(n){var e=JSON.parse(n.data);"CLEAR"===(null===e||void 0===e?void 0:e.action)&&_.clear(),void 0!==(null===e||void 0===e?void 0:e.type)&&_.add(e)}},R=function(n,e){var t=n.getBoundingClientRect(),o=e.clientX-t.left,c=e.clientY-t.top,i={type:"CIRCLE",color:C,radius:2,posX:o,posY:c};T.send(JSON.stringify(i))},y=function(n){n.fillStyle="white",n.fillRect(0,0,o.width,o.height),Array.from(_).map((function(e){!function(n){var e=n.ctx,t=n.posX,o=n.posY,c=n.radius,i=n.color;e.beginPath(),e.arc(t,o,c,0,2*Math.PI),e.fillStyle=i,e.fill(),e.strokeStyle=i,e.stroke()}(Object(l.a)({ctx:n},e))}))},D=function(){T.send(w)},L=function(){var n="https://letsdrawtogether.net/api/canvasState";console.log(n),fetch(n,{method:"GET"}).then((function(n){return n.json()})).then((function(n){console.log(n),_=new Set(n),console.log(_)}))},W=function(n,e){x=!1},k=function(){var n=Object(c.useRef)(),e=Object(p.d)(),t=function(n,e,t){n.width=e,n.height=t,g=e,E=t};window.addEventListener("resize",t,!1);return Object(c.useEffect)(Object(d.a)(u.a.mark((function c(){var i,r;return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return m(),setInterval((function(){return n="/",e.push(n);var n}),5e3),(o=n.current).addEventListener("mousedown",(function(n){return R(o,n)})),r=function(){var n=Object(d.a)(u.a.mark((function n(){var e,c,a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=window.innerWidth-15,c=window.innerHeight-160,t(o,e,c),a=o.getContext("2d"),y(a),i=requestAnimationFrame(r);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),c.next=7,r();case 7:return c.abrupt("return",(function(){cancelAnimationFrame(i)}));case 8:case"end":return c.stop()}}),c)})))),Object(v.jsxs)("div",{children:[Object(v.jsx)(j,{}),Object(v.jsx)("div",{children:"created by Rich White"}),Object(v.jsx)(h.a,{onClick:D,children:"Clear Canvas"}),Object(v.jsx)("canvas",{ref:n,width:g,height:E,onMouseDown:function(n){return function(n,e){R(n,e),x=!0}(o,n)},onMouseMove:function(n){return function(n,e){x&&R(n,e)}(o,n)},onMouseUp:function(n){return W()},onMouseLeave:function(n){return W()}}),Object(v.jsx)(f.a,{onChange:function(n,e){C=n.hex}})]})},A=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(k,{})})},P=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,250)).then((function(e){var t=e.getCLS,o=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;t(n),o(n),c(n),i(n),r(n)}))},F=t(67),N=t(248);a.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(F.a,{children:Object(v.jsx)(N.a,{children:Object(v.jsx)(A,{})})})}),document.getElementById("root")),P()}},[[230,1,2]]]);
//# sourceMappingURL=main.527e7cc5.chunk.js.map